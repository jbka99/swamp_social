<div class="sidebar">
  <div class="sidebar__header d-flex align-items-center justify-content-between">
    <h3 class="sidebar__title">Создать тред</h3>
  </div>

  <div class="sidebar__body">
    {% if current_user.is_authenticated|default(false) %}
      <form method="POST" action="{{ url_for('routes.thread_new') }}" enctype="multipart/form-data" class="d-grid gap-3" id="thread-create-form">
        <div>
          <label class="form-label text-secondary">Заголовок</label>
          <input type="text" name="title" class="form-control" placeholder="О чём тред?" required>
        </div>

        <div>
          <label class="form-label text-secondary">Текст</label>
          <textarea name="content" class="form-control" placeholder="Ваши мысли..." rows="5" required></textarea>
        </div>

        <div>
          <label class="form-label text-secondary">Изображение (опционально)</label>
          <input type="file" name="image" accept="image/*" class="form-control thread-image-input">
          <div class="image-preview-container mt-2" style="display: none;">
            <img src="" alt="Preview" class="image-preview" style="max-width: 100%; max-height: 200px; object-fit: contain;">
            <button type="button" class="btn btn-sm btn-outline-secondary mt-2 image-preview-remove">Убрать</button>
          </div>
        </div>

        <button type="submit" class="btn btn-success">
          Создать тред
        </button>
      </form>
    {% else %}
      <div class="sidebar__muted">
        Войдите, чтобы создать тред.
      </div>
    {% endif %}
  </div>
</div>
