{# templates/components/_sidebar_right.html #}
{% if current_user.is_authenticated|default(false) %}
  <div class="sidebar">
    <div class="sidebar__header">
      <div class="sidebar-user">
        <img
          src="{{ current_user.avatar_url|default('') if current_user.avatar_url|default('') else 'https://api.dicebear.com/7.x/identicon/svg?seed=' + (current_user.username|default('')) }}"
          alt="Avatar"
          class="sidebar-user__avatar"
          referrerpolicy="no-referrer"
        >
        <div>
          <div class="sidebar-user__name">{{ (current_user.display_name|default('')) or (current_user.username|default('')) }}</div>
          <div class="sidebar-user__handle">@{{ current_user.username|default('') }}</div>
        </div>
      </div>
    </div>

    <div class="sidebar__body">
      <ul class="sidebar__list">

        <a class="sidebar__item" href="{{ url_for('routes.user_profile', username='me') }}">
          Профиль
        </a>

        <a class="sidebar__item" href="{{ url_for('routes.threads') }}">
          Треды
        </a>

        <a class="sidebar__item" href="{{ url_for('routes.feed') }}">
          Инфо-панель
        </a>

        <span class="sidebar__item sidebar__item--muted">
          Личные сообщения
          <span class="sidebar__badge">скоро</span>
        </span>

        {% if current_user.is_admin|default(false) %}
          <a class="sidebar__item" href="{{ url_for('routes.admin_users') }}">
            Админка
          </a>
        {% endif %}

        <div class="sidebar__divider"></div>

        <a class="sidebar__item sidebar__item--danger" href="{{ url_for('routes.logout') }}">
          Выход
        </a>

      </ul>
    </div>
  </div>
{% else %}
  <div class="sidebar">
    <div class="sidebar__header">
      <h3 class="sidebar__title">Аккаунт</h3>
      <div class="sidebar__muted">Войдите или зарегистрируйтесь</div>
    </div>

    <div class="sidebar__body">
      <ul class="sidebar__list">
        <a class="sidebar__item" href="{{ url_for('routes.login') }}">Вход</a>
        <a class="sidebar__item" href="{{ url_for('routes.register') }}">Регистрация</a>
      </ul>
    </div>
  </div>
{% endif %}